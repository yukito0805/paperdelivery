<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>新聞配達ルートマップ</title>

  <!-- スマホ用レスポンシブ指定 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Leaflet（地図ライブラリ）のCSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- 自分のCSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- 住所検索バー -->
<div id="addressSearchBar">
  <input
    type="text"
    id="addressInput"
    placeholder="住所で移動（例：東京都千代田区丸の内1-1）"
  />
  <button id="addressSearchBtn" class="primary-btn small-btn">検索</button>
</div>

<div id="map"></div>

<!-- 配達先一覧を開くフローティングボタン -->
<button id="openListBtn" class="fab-btn">
  📋 配達先
</button>

<!-- 新規登録用モーダル -->
<div id="modal">
  <div id="modalContent">
    <h3>配達先を登録</h3>

    <!-- 丁目入力 -->
    <div class="form-row">
      <label for="chomeInput">丁目（例：旭町3丁目 / 3丁目）</label>
      <input type="text" id="chomeInput" placeholder="例：旭町3丁目 / 3丁目" />
    </div>

    <div class="form-row">
      <label>種類</label>
      <label class="radio-label">
        <input type="radio" name="kind" value="house" checked /> 一軒家
      </label>
      <label class="radio-label">
        <input type="radio" name="kind" value="apartment" /> マンション
      </label>
    </div>

    <div class="form-row" id="roomRow" style="display:none;">
      <label for="roomInput">部屋番号（例：504）</label>
      <input type="text" id="roomInput" placeholder="例：504" />
    </div>

    <div class="form-row">
      <label for="nameInput">契約者名</label>
      <input type="text" id="nameInput" placeholder="例：山田 太郎" />
    </div>

    <!-- 新聞の種類 -->
    <div class="form-row">
      <label for="paperType">新聞の種類</label>
      <select id="paperType">
        <option value="mainichi">毎日新聞</option>
        <option value="asahi">朝日新聞</option>
        <option value="nikkei">日経新聞</option>
      </select>
    </div>

    <!-- 備考欄 -->
    <div class="form-row">
      <label for="noteInput">備考（任意）</label>
      <textarea id="noteInput" rows="2" placeholder="ポストの位置・犬・注意点など"></textarea>
    </div>

    <!-- 写真（カメラ）入力 -->
    <div class="form-row">
      <label for="photoInput">建物の写真（任意）</label>
      <input
        type="file"
        id="photoInput"
        accept="image/*"
        capture="environment"
      />
      <small>※スマホの場合、カメラが起動します（ブラウザによる）</small>
    </div>

    <small>※住所は地図上の位置＋丁目で管理します。</small>

    <div class="modal-buttons">
      <button id="cancelBtn" class="secondary-btn">キャンセル</button>
      <button id="saveBtn" class="primary-btn">保存</button>
    </div>
  </div>
</div>

<!-- 配達先一覧パネル（横からスライド） -->
<div id="listModal">
  <div id="listPanel">
    <div class="list-header">
      <h2>配達先一覧</h2>
      <button id="closeListBtn" class="secondary-btn small-btn">閉じる</button>
    </div>

    <p class="description">
      地図をタップすると新しい配達先を登録できます。<br/>
      データはブラウザに保存されます（localStorage）。
    </p>

    <!-- 契約者名検索 -->
    <div class="search-row">
      <input
        type="text"
        id="searchInput"
        placeholder="契約者名で検索（例：山田）"
      />
      <button id="searchBtn" class="primary-btn small-btn">検索</button>
      <button id="clearSearchBtn" class="secondary-btn small-btn">クリア</button>
    </div>

    <!-- 現在地＆全削除 -->
    <button id="locateBtn" class="primary-btn">
      📍 現在地へ移動
    </button>

    <button id="clearAllBtn" class="danger-btn">
      🗑 すべて削除
    </button>

    <div id="list"></div>
  </div>
</div>

<!-- 詳細表示用モーダル（横からスライド） -->
<div id="detailModal">
  <div id="detailPanel">
    <h3 id="detailTitle">配達先詳細</h3>
    <div id="detailBody">
      <div class="detail-row">
        <span class="detail-label">種類</span>
        <span id="detailKind"></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">新聞</span>
        <span id="detailPaper"></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">契約者</span>
        <span id="detailName"></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">丁目</span>
        <span id="detailChome"></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">座標</span>
        <span id="detailCoord"></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">備考</span>
        <span id="detailNote"></span>
      </div>

      <!-- 写真表示エリア -->
      <div id="detailPhotoWrapper" class="detail-photo" style="display:none;">
        <div class="detail-label">写真</div>
        <img id="detailPhoto" alt="建物写真" />
      </div>
    </div>
    <div class="modal-buttons detail-buttons">
      <button id="detailCloseBtn" class="secondary-btn">閉じる</button>
      <button id="detailDeleteBtn" class="danger-btn">削除</button>
      <button id="detailMapBtn" class="primary-btn">地図へ移動</button>
    </div>
  </div>
</div>

<!-- Leaflet本体のJS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
></script>

<!-- 自分のJS -->
<script src="script.js"></script>
</body>
</html>
